---
// src/pages/settings.astro
import AppLayout from '../layouts/AppLayout.astro';
import QuickBooksConnect from '../components/QuickBooksConnect';
---

<AppLayout title="Settings">
  <div class="settings-page">
    <h1>Settings</h1>

    <div class="settings-sections">
      <section class="settings-section">
        <h2>Company Information</h2>
        <form id="companyForm" class="settings-form">
          <div class="form-group">
            <label>Company Name</label>
            <input type="text" name="companyName" placeholder="Your Company Inc." />
          </div>
          <div class="form-group">
            <label>Fiscal Year Start</label>
            <select name="fiscalYearStart">
              <option value="1">January</option>
              <option value="2">February</option>
              <option value="3">March</option>
              <option value="4">April</option>
              <option value="5">May</option>
              <option value="6">June</option>
              <option value="7">July</option>
              <option value="8">August</option>
              <option value="9">September</option>
              <option value="10">October</option>
              <option value="11">November</option>
              <option value="12">December</option>
            </select>
          </div>
          <div class="form-group">
            <label>Currency</label>
            <select name="currency">
              <option value="USD">USD - US Dollar</option>
              <option value="EUR">EUR - Euro</option>
              <option value="GBP">GBP - British Pound</option>
              <option value="CAD">CAD - Canadian Dollar</option>
            </select>
          </div>
          <button type="submit" class="btn-primary">Save Changes</button>
        </form>
      </section>

      <section class="settings-section">
        <h2>Integrations</h2>
        <QuickBooksConnect client:load companyId="default" />
      </section>

      <section class="settings-section">
        <h2>Data Management</h2>
        <div class="data-actions">
          <button class="btn-secondary" id="exportBtn">Export Data</button>
          <button class="btn-secondary" id="importBtn">Import Data</button>
          <button class="btn-danger" id="resetBtn">Reset All Data</button>
        </div>
      </section>
    </div>
  </div>
</AppLayout>

<style>
  .settings-page {
    padding: 2rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .settings-sections {
    display: flex;
    flex-direction: column;
    gap: 2rem;
    margin-top: 2rem;
  }

  .settings-section {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .settings-section h2 {
    margin-bottom: 1.5rem;
    font-size: 1.25rem;
  }

  .settings-form {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .form-group label {
    font-weight: 600;
    color: var(--text-secondary);
  }

  .form-group input,
  .form-group select {
    padding: 0.75rem;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-size: 1rem;
  }

  .data-actions {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
  }

  .btn-danger {
    padding: 0.75rem 1.5rem;
    background: var(--danger-color);
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
  }

  .btn-danger:hover {
    opacity: 0.9;
  }
</style>

<script>
  document.getElementById('companyForm')?.addEventListener('submit', (e) => {
    e.preventDefault();
    alert('Settings saved successfully!');
  });

  document.getElementById('exportBtn')?.addEventListener('click', () => {
    alert('Exporting data...');
  });

  document.getElementById('importBtn')?.addEventListener('click', () => {
    alert('Import feature coming soon!');
  });

  document.getElementById('resetBtn')?.addEventListener('click', () => {
    if (confirm('Are you sure? This will delete all data!')) {
      alert('Data reset functionality not implemented in demo');
    }
  });
</script>
