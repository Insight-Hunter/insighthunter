account_id = "18c8e61a3669253dcfd0c7eec6be36a3"
name = "insighthunter-bookkeeping"
main = "src/backend/index.ts"
compatibility_date = "2024-07-29"
compatibility_flags = ["nodejs_compat"]

[observability]
enabled = true
head_sampling_rate = 1

[[routes]]
pattern = "bookkeeping.insighthunter.app/api/*"
zone_name = "insighthunter.app"

[[migrations]]
tag = "v1"
new_classes = ["SubscriptionManager", "BookkeepingLedger", "InvoiceManager", "BankConnectionManager"]

[durable_objects]
bindings = [
  { name = "SUBSCRIPTION_MANAGER", class_name = "SubscriptionManager" },
  { name = "BOOKKEEPING_LEDGER", class_name = "BookkeepingLedger" },
  { name = "INVOICE_MANAGER", class_name = "InvoiceManager" },
  { name = "BANK_CONNECTION_MANAGER", class_name = "BankConnectionManager" }
]

[[r2_buckets]]
binding = "SPREADSHEET_UPLOADS"
bucket_name = "insighthunter-uploads"

[vars]
QUICKBOOKS_ENVIRONMENT = "sandbox"
QUICKBOOKS_REDIRECT_URI = "https://bookkeeping.insighthunter.app/api/auth/quickbooks/callback"
FRONTEND_URL = "https://bookkeeping.insighthunter.app"
